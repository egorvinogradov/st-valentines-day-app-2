{
  "version": 3,
  "file": "facebook.js",
  "sourceRoot": "",
  "sources": [
    "facebook.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;EAAA;;AAAA,MAAA;;EAIA,eAAA,GAAkB,QAAA,CAAC,KAAD,EAAQ,QAAR,CAAA;AAEd,QAAA;IAAA,cAAA,GAAiB,QAAA,CAAC,SAAD,CAAA;aACb,CAAC,CAAC,IAAF,CACI;QAAA,GAAA,EAAK,wCAAL;QACA,QAAA,EAAU,OADV;QAEA,OAAA,EAAS,IAFT;QAGA,IAAA,EACI;UAAA,MAAA,EAAQ,kBAAR;UACA,CAAA,EAAG;QADH,CAJJ;QAMA,OAAA,EAAS,QAAA,CAAC,UAAD,CAAA;AACL,cAAA,GAAA,EAAA,IAAA,EAAA;UAAA,kHAAyB,CAAE,qCAA3B;mBACI,SAAA,CAAU,UAAW,CAAA,CAAA,CAAG,CAAA,CAAA,CAAG,CAAA,CAAA,CAAE,CAAC,CAA9B,EADJ;WAAA,MAAA;mBAGI,SAAA,CAAU,EAAV,EAHJ;;QADK,CANT;QAWA,KAAA,EAAO,QAAA,CAAA,CAAA;iBACH,SAAA,CAAU,EAAV;QADG;MAXP,CADJ;IADa;WAgBjB,CAAC,CAAC,IAAF,CACI;MAAA,GAAA,EAAK,CAAA,oBAAA,CAAA,CAAuB,GAAA,CAAI,KAAJ,CAAvB,CAAiC,KAAjC,CAAL;MACA,QAAA,EAAU,OADV;MAEA,OAAA,EAAS,IAFT;MAGA,OAAA,EAAS,QAAA,CAAC,IAAD,CAAA;AAEL,YAAA,QAAA,EAAA,UAAA,EAAA,aAAA,EAAA,gBAAA,EAAA,aAAA,EAAA,eAAA,EAAA,GAAA,EAAA,IAAA,EAAA,IAAA,EAAA;QAAA,mDAAgB,CAAA,CAAA,mBAAhB;UACI,eAAA,GAAkB,IAAI,CAAC,KAAM,CAAA,CAAA;UAC7B,aAAA,4EAA0C,CAAE;UAC5C,IAAG,aAAH;YACI,aAAA,GAAgB,aAAA,IAAiB,SADrC;;UAGA,oDAA2B,CAAE,eAA7B;YACI,QAAA,GAAW,CAAC,CAAC,IAAF,CAAO,eAAe,CAAC,QAAvB,EAAiC,CAAC,OAAD,CAAA,GAAA;qBACxC,OAAO,CAAC,MAAR,KAAkB;YADsB,CAAjC;YAIX,IAAG,QAAQ,CAAC,GAAZ;cACI,IAAG,cAAc,CAAC,IAAf,CAAoB,QAAQ,CAAC,GAA7B,CAAH;gBACI,UAAA,GAAa,QAAQ,CAAC,GAAG,CAAC,KAAb,CAAmB,iBAAnB,CAAsC,CAAA,CAAA,EADvD;eAAA,MAAA;gBAGI,gBAAA,GAAmB,QAAQ,CAAC,GAAG,CAAC,KAAb,CAAmB,OAAnB,CAA4B,CAAA,CAAA,EAHnD;;cAIA,aAAA,GAAgB,CAAA,0BAAA,CAAA,CAA6B,UAAA,IAAc,gBAA3C,CAA4D,mBAA5D;qBAEhB,QAAA,CAAS,aAAT,EAPJ;aAAA,MAAA;qBAUI,QAAA,CAAS,aAAT,EAVJ;aALJ;WANJ;SAAA,MAAA;iBAuBI,cAAA,CAAe,QAAf,EAvBJ;;MAFK,CAHT;MA8BA,KAAA,EAAO,QAAA,CAAA,CAAA;eACH,cAAA,CAAe,QAAf;MADG;IA9BP,CADJ;EAlBc;AAJlB",
  "sourcesContent": [
    "# Looking for people's photos by emails\n# using Gravatar, Facebook and Google+ APIs\n\n\ngetPhotoByEmail = (email, callback) ->\n\n    getGooglePhoto = (gCallback) ->\n        $.ajax\n            url: \"http://plus.google.com/complete/search\"\n            dataType: \"jsonp\"\n            timeout: 5000\n            data:\n                client: \"es-people-picker\"\n                q: email\n            success: (googleData) ->\n                if googleData?[1]?[0]?[3]?.b\n                    gCallback(googleData[1][0][3].b)\n                else\n                    gCallback(\"\")\n            error: ->\n                gCallback(\"\")\n\n    $.ajax\n        url: \"http://gravatar.com/#{md5 email}.json\"\n        dataType: \"jsonp\"\n        timeout: 5000\n        success: (data) ->\n\n            if data?.entry?[0]\n                gravatarProfile = data.entry[0]\n                gravatarPhoto = gravatarProfile.photos?[0]?.value\n                if gravatarPhoto\n                    gravatarPhoto = gravatarPhoto += \"?s=200\"\n\n                if gravatarProfile.accounts?.length\n                    facebook = _.find gravatarProfile.accounts, (account) =>\n                        account.domain is \"facebook.com\"\n\n\n                    if facebook.url\n                        if /profile\\.php/.test(facebook.url)\n                            facebookId = facebook.url.split(\"profile.php?id=\")[1]\n                        else\n                            facebookUsername = facebook.url.split(\".com/\")[1]\n                        facebookPhoto = \"http://graph.facebook.com/#{facebookId or facebookUsername}/picture?type=large\"\n\n                        callback(facebookPhoto)\n\n                    else\n                        callback(gravatarPhoto)\n            else\n                getGooglePhoto(callback)\n\n        error: ->\n            getGooglePhoto(callback)\n"
  ]
}